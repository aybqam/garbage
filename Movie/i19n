Great! Now let me help you fix the layout and page structure to work properly with i18n. Here's the correct setup:

1. Update the root layout.js

Create or update app/layout.js in your root app directory:

```jsx
export default function RootLayout({ children }) {
  return (
    <html>
      <body>{children}</body>
    </html>
  );
}
```

2. Create the locale-specific layout

Create app/[locale]/layout.js:

```jsx
import { NextIntlClientProvider } from 'next-intl';
import { getMessages } from 'next-intl/server';
import { notFound } from 'next/navigation';

export default async function LocaleLayout({ children, params: { locale } }) {
  // Validate that the incoming `locale` parameter is valid
  if (!['en', 'ar'].includes(locale)) {
    notFound();
  }

  // Providing all messages to the client
  // side is the easiest way to get started
  const messages = await getMessages();

  return (
    <html lang={locale} dir={locale === 'ar' ? 'rtl' : 'ltr'}>
      <body>
        <NextIntlClientProvider messages={messages}>
          {children}
        </NextIntlClientProvider>
      </body>
    </html>
  );
}

export function generateStaticParams() {
  return [{ locale: 'en' }, { locale: 'ar' }];
}
```

3. Create the main page

Create app/[locale]/page.jsx:

```jsx
import Navbar from '../../components/navbar';
import Hero from '../../components/hero';
import About from '../../components/about';
import Skills from '../../components/skills';
import Projects from '../../components/projects';
import Contact from '../../components/contact';
import Footer from '../../components/footer';

export default function Home() {
  return (
    <main className="min-h-screen bg-gray-950 text-white">
      <Navbar />
      <Hero />
      <About />
      <Skills />
      <Projects />
      <Contact />
      <Footer />
    </main>
  );
}
```

4. Update the components to use proper navigation

Since we're using [locale] in the URL, we need to update the language switching logic. Here's the updated navbar.jsx:

```jsx
"use client"

import { useState, useEffect } from "react"
import Link from "next/link"
import { Menu, X, Github } from "lucide-react"
import { useTranslations, useLocale } from 'next-intl'
import { useRouter, usePathname } from 'next/navigation'

export default function Navbar() {
  const [isOpen, setIsOpen] = useState(false)
  const [scrolled, setScrolled] = useState(false)
  const t = useTranslations('Navbar')
  const locale = useLocale()
  const router = useRouter()
  const pathname = usePathname()

  useEffect(() => {
    const handleScroll = () => {
      setScrolled(window.scrollY > 50)
    }
    window.addEventListener("scroll", handleScroll)
    return () => window.removeEventListener("scroll", handleScroll)
  }, [])

  const switchLang = (targetLocale) => {
    // Remove the current locale from pathname and add the new one
    const newPathname = pathname.replace(`/${locale}`, `/${targetLocale}`)
    router.push(newPathname)
  }

  const navLinks = [
    { name: t('home'), href: "#home" },
    { name: t('about'), href: "#about" },
    { name: t('skills'), href: "#skills" },
    { name: t('projects'), href: "#projects" },
    { name: t('contact'), href: "#contact" },
  ]

  return (
    <header
      className={`fixed top-0 w-full z-50 transition-all duration-300 ${scrolled ? "bg-gray-900/90 backdrop-blur-md py-3 shadow-md" : "bg-transparent py-5"}`}
    >
      <div className="container mx-auto px-4 md:px-6">
        <div className="flex items-center justify-between">
          <Link href={`/${locale}#home`} className="text-xl font-bold">
            <span className="bg-gradient-to-r from-purple-500 to-blue-500 bg-clip-text text-transparent">
              Dev<span className="text-white">Portfolio</span>
            </span>
          </Link>

          {/* Desktop Navigation */}
          <nav className="hidden md:flex items-center gap-8">
            {navLinks.map((link) => (
              <div key={link.name}>
                <Link 
                  href={`/${locale}${link.href}`} 
                  className="text-gray-300 hover:text-white transition-colors relative group"
                >
                  {link.name}
                  <span className="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-500 to-blue-500 transition-all duration-300 group-hover:w-full"></span>
                </Link>
              </div>
            ))}
          </nav>

          {/* Social Icons + Language Toggle */}
          <div className="hidden md:flex items-center gap-4">
            <a
              href="https://github.com/Win11HW"
              target="_blank"
              rel="noopener noreferrer"
              className="text-gray-400 hover:text-white transition-all hover:-translate-y-1 duration-200"
            >
              <Github size={20} />
            </a>
            <div className="rounded-full">
              <button
                type="button"
                onClick={() => switchLang(locale === 'ar' ? 'en' : 'ar')}
                className="px-3 py-1 rounded-full bg-transparent text-white text-xs tracking-wider border border-white hover:bg-white/20 transition"
                aria-label={t('toggleLanguage')}
              >
                {locale === 'ar' ? 'EN' : 'AR'}
              </button>
            </div>
          </div>

          {/* Mobile Menu Button */}
          <button className="md:hidden text-gray-300 hover:text-white" onClick={() => setIsOpen(!isOpen)}>
            {isOpen ? <X size={24} /> : <Menu size={24} />}
          </button>
        </div>
      </div>

      {/* Mobile Navigation */}
      <div
        className={`md:hidden bg-gray-900 shadow-lg transition-all duration-300 ${
          isOpen ? "opacity-100 max-h-96" : "opacity-0 max-h-0 overflow-hidden"
        }`}
      >
        <div className="container mx-auto px-4 py-4">
          <nav className="flex flex-col space-y-4">
            {navLinks.map((link) => (
              <Link
                key={link.name}
                href={`/${locale}${link.href}`}
                className="text-gray-300 hover:text-white py-2 transition-colors"
                onClick={() => setIsOpen(false)}
              >
                {link.name}
              </Link>
            ))}
            <div className="flex items-center justify-between pt-4 border-t border-gray-800">
              <a
                href="https://github.com/Win11HW"
                target="_blank"
                rel="noopener noreferrer"
                className="text-gray-400 hover:text-white"
              >
                <Github size={20} />
              </a>
              <div className="rounded-full">
                <button
                  type="button"
                  onClick={() => switchLang(locale === 'ar' ? 'en' : 'ar')}
                  className="px-4 py-2 rounded-full bg-transparent text-white text-sm font-semibold tracking-wider border-2 border-white hover:bg-white/20 transition"
                  aria-label={t('toggleLanguage')}
                >
                  {locale === 'ar' ? 'EN' : 'AR'}
                </button>
              </div>
            </div>
          </nav>
        </div>
      </div>
    </header>
  )
}
```

5. Update other components with proper links

Update hero.jsx:

```jsx
"use client";

import { useEffect, useRef } from "react";
import { ArrowDown } from "lucide-react";
import Link from "next/link";
import { useTranslations, useLocale } from 'next-intl';

const PRIMARY_GRADIENT = "bg-gradient-to-r from-purple-600 to-blue-600";
const SECONDARY_BG = "bg-gray-800 hover:bg-gray-700";
const TEXT_PRIMARY = "text-white";
const TEXT_SECONDARY = "text-gray-300";
const TEXT_TERTIARY = "text-gray-400";

export default function Hero() {
  const textRef = useRef(null);
  const t = useTranslations('Hero');
  const locale = useLocale();

  useEffect(() => {
    const textElement = textRef.current;
    if (!textElement) return;

    const roles = [t('frontendDeveloper'), t('backendDeveloper'), t('fullstackDeveloper')];
    let roleIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    let typingSpeed = 100;

    const type = () => {
      const currentRole = roles[roleIndex];
      textElement.textContent = isDeleting
        ? currentRole.substring(0, charIndex - 1)
        : currentRole.substring(0, charIndex + 1);
      charIndex += isDeleting ? -1 : 1;
      typingSpeed = isDeleting ? 50 : 100;

      if (!isDeleting && charIndex === currentRole.length) {
        isDeleting = true;
        typingSpeed = 1000;
      } else if (isDeleting && charIndex === 0) {
        isDeleting = false;
        roleIndex = (roleIndex + 1) % roles.length;
      }
      setTimeout(type, typingSpeed);
    };

    setTimeout(type, 800);
  }, [t]);

  return (
    <section
      id="home"
      className="relative min-h-screen flex flex-col items-center justify-center text-center bg-transparent"
    >
      <div className="container px-4 md:px-6 z-10">
        <span className={`px-4 py-1 mb-4 rounded-full text-sm font-medium ${SECONDARY_BG} ${TEXT_SECONDARY}`}>
          {t('welcome')}
        </span>
        <h1 className="text-4xl md:text-6xl lg:text-7xl font-bold mb-6">
          {t('hiPrefix')} <span className="bg-gradient-to-r from-purple-500 to-blue-500 bg-clip-text text-transparent">
            Ayoub Alayoubi
          </span>
        </h1>
        <div className={`text-xl md:text-2xl ${TEXT_SECONDARY} mb-8 h-8`}>
          {t('imA')} <span ref={textRef} className={`${TEXT_PRIMARY} font-medium`}></span>
        </div>
        <p className={`max-w-2xl ${TEXT_TERTIARY} mb-10 mx-auto`}>
          {t('paragraph')}
        </p>
        <div className="flex justify-center items-center flex-col sm:flex-row gap-4">
          <Link
            href={`/${locale}#projects`}
            className={`px-6 py-3 rounded-lg ${PRIMARY_GRADIENT} ${TEXT_PRIMARY} font-medium shadow-lg shadow-purple-500/20 hover:shadow-purple-500/30 transition-all hover:scale-105`}
          >
            {t('viewWork')}
          </Link>
          <Link
            href={`/${locale}#contact`}
            className={`px-6 py-3 rounded-lg ${SECONDARY_BG} ${TEXT_PRIMARY} font-medium transition-all hover:scale-105`}
          >
            {t('contactMe')}
          </Link>
        </div>
      </div>
      <div className="absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce">
        <a href={`/${locale}#about`} className={`${TEXT_TERTIARY} hover:${TEXT_PRIMARY} transition-colors`}>
          <ArrowDown size={24} />
        </a>
      </div>
    </section>
  );
}
```

6. Update footer.jsx with proper links

```jsx
"use client";

import { motion } from "framer-motion";
import Link from "next/link";
import { ArrowUp } from "lucide-react";
import { useTranslations, useLocale } from 'next-intl';

export default function Footer() {
  const t = useTranslations('Footer');
  const locale = useLocale();

  const scrollToTop = () => {
    window.scrollTo({
      top: 0,
      behavior: "smooth",
    });
  };

  return (
    <footer className="bg-gray-900 py-12 border-t border-gray-800">
      <div className="container mx-auto px-4 md:px-6">
        <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div className="md:col-span-2">
            <Link href={`/${locale}#home`} className="text-xl font-bold mb-4 inline-block">
              <span className="bg-gradient-to-r from-purple-500 to-blue-500 bg-clip-text text-transparent">
                Dev<span className="text-white">Portfolio</span>
              </span>
            </Link>
            <p className="text-gray-400 mb-6 max-w-md">
              {t('tagline')}
            </p>
            <div className="flex space-x-4">
              <a
                href="https://github.com/Win11HW"
                className="text-gray-400 hover:text-white transition-colors"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  fill="currentColor"
                  viewBox="0 0 16 16"
                >
                  <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" />
                </svg>
              </a>
            </div>
          </div>
          <div>
            <h3 className="text-lg font-semibold mb-4">{t('quickLinks')}</h3>
            <ul className="space-y-2">
              <li>
                <Link
                  href={`/${locale}#home`}
                  className="text-gray-400 hover:text-white transition-colors"
                >
                  {t('home')}
                </Link>
              </li>
              <li>
                <Link
                  href={`/${locale}#about`}
                  className="text-gray-400 hover:text-white transition-colors"
                >
                  {t('about')}
                </Link>
              </li>
              <li>
                <Link
                  href={`/${locale}#skills`}
                  className="text-gray-400 hover:text-white transition-colors"
                >
                  {t('skills')}
                </Link>
              </li>
              <li>
                <Link
                  href={`/${locale}#projects`}
                  className="text-gray-400 hover:text-white transition-colors"
                >
                  {t('projects')}
                </Link>
              </li>
              <li>
                <Link
                  href={`/${locale}#contact`}
                  className="text-gray-400 hover:text-white transition-colors"
                >
                  {t('contact')}
                </Link>
              </li>
            </ul>
          </div>
          <div>
            <h3 className="text-lg font-semibold mb-4">{t('contactInfo')}</h3>
            <ul className="space-y-2">
              <li className="flex items-center gap-2">
                <span className="text-purple-500">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    fill="currentColor"
                    viewBox="0 0 16 16"
                  >
                    <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.546Z" />
                  </svg>
                </span>
                <a
                  href="mailto:Essam@example.com"
                  className="text-gray-400 hover:text-white transition-colors"
                >
                  aybqam@gmail.com
                </a>
              </li>
              <li className="flex items-center gap-2">
                <span className="text-purple-500">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    fill="currentColor"
                    viewBox="0 0 16 16"
                  >
                    <path
                      fillRule="evenodd"
                      d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"
                    />
                  </svg>
                </span>
                <a
                  href="tel:+1234567890"
                  className="text-gray-400 hover:text-white transition-colors"
                >
                  (+218)948606475
                </a>
              </li>
              <li className="flex items-center gap-2">
                <span className="text-purple-500">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    fill="currentColor"
                    viewBox="0 0 16 16"
                  >
                    <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" />
                  </svg>
                </span>
                <span className="text-gray-400">
                  {t('city')}
                </span>
              </li>
            </ul>
          </div>
        </div>
        <div className="mt-12 pt-8 border-t border-gray-800 flex flex-col md:flex-row justify-between items-center">
          <p className="text-gray-400 text-sm mb-4 md:mb-0">
            © {new Date().getFullYear()} Ayoub Alayoubi. {t('rights')}
          </p>
          <motion.button
            onClick={scrollToTop}
            whileHover={{ y: -3 }}
            className="p-3 bg-gray-800 rounded-full text-gray-400 hover:text-white hover:bg-gray-700 transition-all"
          >
            <ArrowUp size={20} />
          </motion.button>
        </div>
      </div>
    </footer>
  );
}
```

7. Update the middleware

Make sure your middleware.js is set up correctly:

```javascript
import createMiddleware from 'next-intl/middleware';

export default createMiddleware({
  // A list of all locales that are supported
  locales: ['en', 'ar'],

  // Used when no locale matches
  defaultLocale: 'en'
});

export const config = {
  // Match only internationalized pathnames
  matcher: ['/', '/(ar|en)/:path*']
};
```

Key changes made:

1. Fixed layout structure with proper locale handling
2. Updated navigation to include locale in URLs
3. Proper language switching that preserves the current route
4. RTL support for Arabic through the dir attribute
5. Static generation for better performance

Now your i18n setup should work properly with:

· URLs like /en and /ar
· Proper RTL layout for Arabic
· Language switching that maintains the current page
· All translations working through the JSON files

The portfolio will be accessible at:

· English: http://localhost:3000/en
· Arabic: http://localhost:3000/ar
